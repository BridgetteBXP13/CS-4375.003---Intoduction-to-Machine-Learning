---
title: "Regression"
student: "Isabelle Kirby", "Bridgette Bryant" 
NetID: "IRK180000", "BMB180001"
Assignment: "Linear Models"
Date: "09/16/2021"
---
Linear Regression:

In simple terms, linear regression tries to predict a quantitative target by fitting a linear model to the input of the predictors to best fit the target in the training data. A simple linear regression model is often in the form of y = wX + b where y values as the targets, X values as the predictors, the linear model creates the weight matrix w and the fitting parameter b. Linear models don't always have to be straight lines, they can be complex polynomials with multiple predictor variables. Once a linear regression model is created/trained, you can judge it's performance by the standard error, t-value, and most of all the p-value. A p-value very close to 0 is the most ideal, R will show you with '***' to ' ' next to the value with '***' showing an excellent p-value. Residual standard error is also another way to measure your linear model, it calculated from residual sum of squared errors, and measures the lack of fit the model has for the data. However, it is in the units of the data and can be difficult to interpret at times, therefore it is better to use r-squared which lies between 0 and 1. The closer to 1 the better the model. You can also evaluate the model with correlation, which shows the correlation, which shows the degree in terms of 1 and -1, a close to 1 shows it is strongly positively correlation, a -1 shows it is strongly negatively correlation, and lastly a 0 shows no correlation. Linear regression has a few weaknesses including iteration effects, where there is too much synergy between predictors, causing them to have too much impact as a whole on the model. Along with confounding variables, which correlate with both the target and predictors which can give too high of a correlation in the training data. Also, hidden variables in the model, this can lead to false conclusions and assumptions such as a correlation being a causation in the data. Linear regression is also very likely to underfit data, causing it to fail at capturing some of the data and have a low accuracy. However, linear regression is very simple to implement and has a very high performance on linearly separable data sets. Also, overfitting data is unlikely to happen and can be very easy to fix in linear models using regularization.

We chose the "Air_Pollution.csv" for this assignment. It contains data of the overall air quality of different cities overtime. 

It has 32191 observations initially.
```{r}
df <- read.csv("Air_Pollution.csv")
str(df)
```
We then fill incomplete rows cells with the medians from their rows
```{r}
df$PM2.5[is.na(df$PM2.5)] <- mean(df$PM2.5, na.rm=TRUE)
df$PM10[is.na(df$PM10)] <- mean(df$PM10, na.rm=TRUE)
df$NO2[is.na(df$NO2)] <- mean(df$NO2, na.rm=TRUE)
df$PM25.temporal.coverage[is.na(df$PM25.temporal.coverage)] <- mean(df$PM25.temporal.coverage, na.rm=TRUE)
df$PM10.temporal.coverage[is.na(df$PM10.temporal.coverage)] <- mean(df$PM10.temporal.coverage, na.rm=TRUE)
df$NO2.temporal.coverage[is.na(df$NO2.temporal.coverage)] <- mean(df$NO2.temporal.coverage, na.rm=TRUE)

str(df)
```

Now we are creating the training and testing sets.
```{r}
i <-sample(1:nrow(df), .8*nrow(df), replace=FALSE)
train <- df[i,]
test <- df[-i,]
```

```{r}
head(train)

tail(train)

range(train$PM2.5, na.rm=FALSE)
range(train$PM10, na.rm=FALSE)

mean(train$PM2.5)
mean(train$PM10)

median(train$PM2.5)
median(train$PM10)

```



Plotting the linear regression
```{r}
lm1 <- lm(NO2~NO2.temporal.coverage, data=train)
summary(lm1)
plot(lm1)
```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.
